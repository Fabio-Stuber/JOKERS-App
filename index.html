<!DOCTYPE html>
<html lang="de">
	<head>
		<link rel="manifest" href="https://app.jokers-pub.ch/manifest.json" />
		<script src="https://app.jokers-pub.ch/sw.js"></script>
		<script>
			if ("serviceWorker" in navigator) {
				window.addEventListener("load", () => {
					navigator.serviceWorker
						.register("service-worker.js")
						.then(function (registration) {
							console.log("ServiceWorker registered");
						})
						.catch(function (err) {
							console.log("ServiceWorker error: ", err);
						});
				});
			}
		</script>
		<script>
			if (window.matchMedia("(display-mode: standalone)").matches) {
				window.location.replace("https://www.jokers-pub.ch");
			}
		</script>
		<script>
			if ("serviceWorker" in navigator && "PushManager" in window) {
				window.addEventListener("beforeinstallprompt", (e) => {
					e.preventDefault();

					const deferredPrompt = e;

					const installButton = document.createElement("button");
					installButton.textContent = "Install App";
					installButton.style.position = "fixed";
					installButton.style.top = "10px";
					installButton.style.left = "50%";
					installButton.style.transform = "translateX(-50%)";
					installButton.style.zIndex = "9999";
					installButton.style.padding = "10px 20px";
					installButton.classList.add("btn-grad");
					installButton.style.color = "white";
					installButton.style.border = "none";
					installButton.style.borderRadius = "5px";
					installButton.style.cursor = "pointer";

					installButton.addEventListener("click", () => {
						deferredPrompt.prompt();

						deferredPrompt.userChoice.then((choiceResult) => {
							if (choiceResult.outcome === "accepted") {
								console.log("App installed");
							} else {
								console.log("App installation declined");
							}

							installButton.style.display = "none";
						});
					});

					document.body.appendChild(installButton);
				});
			}
		</script>
	</head>
	<body>
		<div class="header">
			<h1 class="headertext">JOKERS APP</h1>
		</div>
	</body>
</html>
